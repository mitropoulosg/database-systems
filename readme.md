

ΛΙΒΑΣ ΣΤΑΜΟΥΛΗΣ : sdi2000115
ΜΗΤΡΟΠΟΥΛΟΣ ΓΕΩΡΓΙΟΣ : sdi2000128

struct HP_info
    Περιέχει ένα δείκτη στο buffer, ο οποίος δείχνει στο μπλοκ #0 οπου και θα βρίσκεται η ίδια η δομή. Ο δείκτης αρχικοποιειται στην OpenFile οπου και πρωτοτοποθετέιται το πρώτο μπλοκ στο buffer.

struct HP_block_info
    Δεν περιέχει δείκτη σε επόμενο μπλοκ (ή σε συγγενές) γιατί για τα ζητούμενα της παρούσας εργασίας δεν χρειάστηκε.

HP_OpenFile
    Ανοίγουμε το αρχείο φορτώνοντας το μπλοκ #0 (file metadata block) στον buffer και αφήνωντας το εκεί μέχρι και την hp_closeFile. Επιστρέφει ένα αντίγραφο των metadata του αρχείου και όχι δείκτη στα ίδια τα metadata για λόγους ασφάλειας (Για να μην μπορεί ο χρήστης να πειράζει τα πεδία του).

HP_InsertEntry
    Η συνάρτηση φέρνει μόνο το τελευτάιο μπλοκ στον buffer, καθώς το πρώτο είναι μόνιμα εκεί και λειτουργεί ακριβώς όπως παρουσιάζεται στην παρουσίαση εργασιών.
    

HP_GetAllEntries
    Η εκφώνηση λέει ξεκάθαρα ότι πρέπει να εκτυπώνονται ΟΛΕΣ οι εγγραφές με την συγκεκριμένη ιδιότητα. Οπότε η εκτέλεση της συνάρτησης δεν σταματάει στην πρώτη. Για να γίνει αυτό πρέπει διατρέξει όλα τα μπλοκ αρα και να επιστρεψει τελικά το πλήθος όλων των μπλοκ. Σε περίπτωση που δεν ισχύει αυτό που λέγεται στην εκφώνηση και πρέπει να σταματάει στην πρώτη εγγραφή, τότε μεταφέρουμε απλά την bf_unpin, την bf_block_destroy και την return εντός της if.

ht_table.c

struct HT_info
    Περιέχει ένα hash table που έχει τόσο το πρώτο μπλοκ του κάθε bucket, όσο και το τελυταίο (σύμφωνα με συμβουλή του διδάσκοντα στο eclass).

struct HP_block_info
    Εκτός απο τον αριθμό εγγραφών περιέχει και ενα index στο επόμενο μπλοκ του δίσκου (τα μπλοκ ενώνονται όπως οι κόμβοι μιας λίστας)

HT_OpenFile
    Σε αντίθεση με το hp, εδώ επιστρέφουμε τον ίδιο τον πίνακα και δεν δημιουργούμε άλλον πανομοιότυπο για λόγους ευκολίας

HT_InsertEntry
    Βρισκουμε το bucket στο οποίο θα γίνει η εισαγωγή και βρίσκουμε το τελευταίο μπλοκ του κουβά(χρησιμοποιώντας τον πίνακα). Απο εκέι και πέρα αν χωράει μπάινει κανονικά - αν δεν χωράει δημιουργείται καινούριο μπλοκ, που θα είναι το αμέσως επόμενο του τελευταίου (και συνεπώς το νέο τελευταίο). Στην περίπτωση που το bucket είναι άδειο δημιουρουργούμε του πρώτο του μπλοκ και ενημερώνουμε τον πίνακα αντίστοιχα (αρχή = τέλος = id νεου μπλοκ).

ΗΤ_GetAllEntries
    Μια απλή σειριακή διάσχιση όλων των μπλοκ του κουβά

SHT
    Ακριβώς ίδια νοοτροπία με το ht. Η μόνη διαφορά έγκειται στην GetAllEntries, η οποία διασχίζει κάθε μπλοκ του κουβά και τα αντιστοιχα pairs και απο εκεί διασχίζει το μπλοκ στο οποιο δείχνει ο δείκτης του pair. Αξίζει να σημειωθεί ότι η συνάρτηση δεν ελέγχει για το αν έχει ήδη επισκεφθει ένα μπλοκ με αποτέλεσμα να επιστρέφει ακέραια πολλαπλάσια σε πληθος των ζητουμενων εγγραφών. Πχ αν εισάγουμε χειροκίνητα 2 μαρίες, η συνάρτηση θα επιστρέψει 4 καθως τα ζευγη δειχνουν στα ιδια μπλοκ αντιστοιχα (διατρεχουμε το ίδιο μπλοκ 2 φορες και τα ξαναεκτυπώνουμε). 

HashStatistics
    Καναμε 2 τέτοιες. Μια για το ht και μια για το sht αντιστοιχα. Καλούνται και οι 2 στο stats_main.c


Makefile
    Έγιναν οι κατάλληλες αλλαγές/πρόσθηκες(++make stats) για διευκόλυνση. 


Σημείωση 
   - Όπου μπορέσαμε αποφύγαμε την memcpy και γράφαμε στην μνήμη με τρόπο όμοιο με την bf_main. Το επέτρεψε και αυτό, φυσικά, ο διδάσκοντας.



 





